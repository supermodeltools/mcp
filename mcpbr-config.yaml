# Recommended Supermodel MCP server configuration for mcpbr
#
# Best-practice config: minimal agent_prompt to avoid suppressing parallel
# tool calls. All workflow guidance lives in the MCP server's instructions
# field (see src/server.ts), which does not inhibit parallelism.
#
# See: https://github.com/supermodeltools/mcp/issues/123
#
# Requires SUPERMODEL_API_KEY environment variable.

mcp_server:
  name: "supermodel"
  command: "npx"
  args:
    - "-y"
    - "@supermodeltools/mcp-server@0.9.4"
    - "{workdir}"
    - "--precache"
  env:
    SUPERMODEL_API_KEY: "${SUPERMODEL_API_KEY}"
    SUPERMODEL_BASE_URL: "https://api.supermodeltools.com"
    SUPERMODEL_CACHE_DIR: "/tmp/supermodel-cache"
  setup_command: "npx -y @supermodeltools/mcp-server@0.9.4 precache {workdir} --output-dir /tmp/supermodel-cache"
  setup_timeout_ms: 900000

provider: "anthropic"

agent_harness: "claude-code"

model: "claude-sonnet-4-20250514"

benchmark: "swe-bench-verified"

timeout_seconds: 300

max_concurrent: 2

max_iterations: 30

# Minimal agent_prompt: just the problem statement + repo location.
# Workflow guidance comes from the MCP server instructions field, which
# preserves the agent's natural parallel tool-calling behavior.
agent_prompt: |
  {problem_statement}

  The repository is at {workdir}. The MCP server instructions contain the
  codebase overview and workflow guidance. Do not write standalone test scripts;
  use the project's existing test suite. Do not use TodoWrite.
